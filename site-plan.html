<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="favicon.svg" />
    <link rel="shortcut icon" href="favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png" />
    <link rel="manifest" href="site.webmanifest" />
    <title>Site Plan - MSR Dashboard</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* ── RPS Branding Color Scheme ── */
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        .card-title,
        .lead {
            color: var(--text-dark) !important;
        }

        :root {
            --primary-charcoal: #3a3a3a;
            --primary-dark: #2a2a2a;
            --primary-darker: #1a1a1a;
            --lime-green: #2563EB;
            --lime-green-light: #a8d45f;
            --lime-green-dark: #7ab82d;
            --white: #ffffff;
            --off-white: #F8FAFC;
            --light-gray: #e8e8e8;
            --medium-gray: #cccccc;
            --dark-gray: #666666;
            --text-dark: #333333;
            --success-green: #2563EB;
            --warning-orange: #f5a623;
            --danger-red: #d0021b;
            --info-blue: #4a90e2;

            /* Asset status colors */
            --status-installed: #2563EB;
            --status-onsite: #3a3a3a;
            --status-intransit: #f5a623;
            --status-atvendor: #d0021b;
            --status-stagedoff: #999999;
        }

        * {
            box-sizing: border-box;
        }

        body {
            background-color: #F8FAFC;
            font-family: Arial, "Helvetica Neue", Helvetica, sans-serif;
            color: var(--text-dark);
            margin: 0;
            min-height: 100vh;
        }

        /* ── Navbar ── */
        .navbar {
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.3);
            background-color: var(--navbar-bg) !important;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(37, 99, 235, 0.15);
        }

        .navbar-brand {
            font-weight: 600;
            font-size: 1.35rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            color: var(--navbar-text) !important;
        }

        .navbar-brand img {
            height: 50px;
            width: auto;
        }

        .navbar-nav .nav-link {
            color: var(--navbar-text) !important;
            transition: all 0.3s ease;
            font-weight: 500;
            padding: 0.5rem 1rem;
        }

        .navbar-nav .nav-link:hover,
        .navbar-nav .nav-link.active {
            color: var(--lime-green) !important;
        }

        /* ── Page header ── */
        .page-header {
            background: var(--navbar-bg);
            border-bottom: 1px solid var(--border-light);
            padding: 1.5rem 2rem;
            /* Add horizontal padding back */
        }

        .page-header h1 {
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-dark);
        }

        .page-header p {
            color: var(--navbar-text);
            margin: 0.25rem 0 0;
            font-size: 0.95rem;
        }

        /* ── KPI Bar ── */
        .kpi-bar {
            display: flex;
            gap: 1rem;
            padding: 1.25rem 0;
            flex-wrap: wrap;
        }

        .kpi-card {
            background: var(--white);
            border: none;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
            border-radius: 12px;
            padding: 1rem 1.5rem;
            flex: 1;
            min-width: 150px;
            text-align: center;
            transition: all 0.3s ease;
            backdrop-filter: blur(8px);
        }

        .kpi-card:hover {
            background: #F8FAFC;
            border-color: rgba(37, 99, 235, 0.3);
            transform: translateY(-2px);
        }

        .kpi-card .kpi-value {
            font-size: 2rem;
            font-weight: 700;
            line-height: 1;
        }

        .kpi-card .kpi-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--dark-gray);
            margin-top: 0.35rem;
        }

        .kpi-card .kpi-dot {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 6px;
            vertical-align: middle;
        }

        .kpi-installed .kpi-value {
            color: var(--status-installed);
        }

        .kpi-onsite .kpi-value {
            color: var(--lime-green);
        }

        .kpi-intransit .kpi-value {
            color: var(--status-intransit);
        }

        .kpi-atvendor .kpi-value {
            color: var(--status-atvendor);
        }

        .kpi-total .kpi-value {
            color: var(--primary-charcoal);
        }

        /* ── Main layout ── */
        .synoptic-container {
            display: grid;
            grid-template-columns: 1fr 380px;
            gap: 1.5rem;
            padding: 1.5rem 0;
        }

        @media (max-width: 1200px) {
            .synoptic-container {
                grid-template-columns: 1fr;
            }
        }

        /* ── Floor Plan Panel ── */
        .floor-plan-panel {
            background: var(--white);
            border: none;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
            border-radius: 16px;
            overflow: hidden;
            position: relative;
        }

        .floor-plan-header {
            background: #F8FAFC;
            padding: 1rem 1.5rem;
            border-bottom: 3px solid var(--lime-green);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .floor-plan-header h3 {
            color: var(--text-dark);
            font-size: 1rem;
            font-weight: 600;
            margin: 0;
        }

        .floor-plan-header .controls {
            display: flex;
            gap: 0.5rem;
        }

        .floor-plan-body {
            padding: 1.5rem;
            position: relative;
        }

        /* ── SVG Floor Plan ── */
        .factory-svg {
            width: 100%;
            height: auto;
            display: block;
        }

        .zone-group {
            cursor: pointer;
        }

        .zone-rect {
            stroke: rgba(37, 99, 235, 0.3);
            stroke-width: 1.5;
            rx: 6;
            ry: 6;
            transition: all 0.3s ease;
        }

        .zone-group:hover .zone-rect {
            stroke: var(--lime-green);
            stroke-width: 2.5;
            filter: drop-shadow(0 0 8px rgba(37, 99, 235, 0.25));
        }

        .zone-group.active .zone-rect {
            stroke: var(--lime-green);
            stroke-width: 3;
            filter: drop-shadow(0 0 12px rgba(37, 99, 235, 0.4));
        }

        .zone-label {
            fill: var(--text-dark);
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            pointer-events: none;
        }

        .zone-sublabel {
            fill: var(--dark-gray);
            font-size: 9px;
            pointer-events: none;
        }

        .asset-dot {
            cursor: pointer;
            transition: all 0.25s ease;
        }

        .asset-dot:hover {
            filter: drop-shadow(0 0 6px currentColor) brightness(1.3);
            transform-origin: center;
        }

        .zone-count-badge {
            pointer-events: none;
        }

        /* Factory outline */
        .factory-outline {
            fill: none;
            stroke: rgba(37, 99, 235, 0.15);
            stroke-width: 2;
            stroke-dasharray: 6 3;
        }

        .factory-wall {
            fill: none;
            stroke: rgba(255, 255, 255, 0.06);
            stroke-width: 1;
        }

        /* ── Pulse animation for recent arrivals ── */
        @keyframes pulse-dot {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.4;
            }
        }

        .asset-dot.recent {
            animation: pulse-dot 2s ease-in-out infinite;
        }

        /* ── Off-Site Key Panel ── */
        .offsite-panel {
            background: var(--white);
            border: none;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
            border-radius: 16px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            max-height: 780px;
        }

        .offsite-header {
            background: #F8FAFC;
            padding: 1rem 1.5rem;
            border-bottom: 3px solid var(--lime-green);
        }

        .offsite-header h3 {
            color: var(--text-dark);
            font-size: 1rem;
            font-weight: 600;
            margin: 0;
        }

        .offsite-body {
            padding: 1rem;
            overflow-y: auto;
            flex: 1;
        }

        .offsite-body::-webkit-scrollbar {
            width: 6px;
        }

        .offsite-body::-webkit-scrollbar-track {
            background: transparent;
        }

        .offsite-body::-webkit-scrollbar-thumb {
            background: rgba(37, 99, 235, 0.3);
            border-radius: 3px;
        }

        .status-group {
            margin-bottom: 1.25rem;
        }

        .status-group-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 0.75rem;
            border-radius: 12px;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: background 0.2s;
        }

        .status-group-header:hover {
            background: var(--white);
        }

        .status-group-header .dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .status-group-header .label {
            color: var(--text-dark);
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            flex: 1;
        }

        .status-group-header .count {
            color: var(--dark-gray);
            font-size: 0.85rem;
            font-weight: 600;
        }

        .offsite-asset-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.6rem 0.75rem;
            border-radius: 12px;
            transition: all 0.2s ease;
            cursor: pointer;
            border: 1px solid transparent;
        }

        .offsite-asset-item:hover {
            background: rgba(37, 99, 235, 0.06);
            border-color: rgba(37, 99, 235, 0.15);
        }

        .offsite-asset-item .asset-icon {
            width: 32px;
            height: 32px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            color: white;
            flex-shrink: 0;
        }

        .offsite-asset-item .asset-info {
            flex: 1;
            min-width: 0;
        }

        .offsite-asset-item .asset-name {
            color: var(--text-dark);
            font-size: 0.85rem;
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .offsite-asset-item .asset-meta {
            color: var(--dark-gray);
            font-size: 0.72rem;
        }

        .offsite-asset-item .asset-eta {
            color: var(--dark-gray);
            font-size: 0.72rem;
            white-space: nowrap;
        }

        /* ── Filter bar ── */
        .filter-bar {
            display: flex;
            gap: 0.75rem;
            padding: 1rem 0;
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-bar .form-control,
        .filter-bar .form-select {
            background: var(--white);
            border: none;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
            color: var(--text-dark);
            border-radius: 12px;
            font-size: 0.85rem;
            padding: 0.5rem 1rem;
        }

        .filter-bar .form-control::placeholder {
            color: var(--navbar-text);
        }

        .filter-bar .form-control:focus,
        .filter-bar .form-select:focus {
            border-color: var(--lime-green);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.15);
            background: var(--white);
        }

        .filter-bar .form-select option {
            background: var(--primary-charcoal);
            color: var(--white);
        }

        .filter-btn {
            background: rgba(37, 99, 235, 0.12);
            border: 1px solid rgba(37, 99, 235, 0.2);
            color: var(--lime-green);
            border-radius: 12px;
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .filter-btn:hover {
            background: rgba(37, 99, 235, 0.2);
        }

        .filter-btn.active {
            background: var(--lime-green);
            color: var(--primary-charcoal);
        }

        /* ── Tooltip ── */
        .zone-tooltip {
            position: absolute;
            background: var(--white);
            backdrop-filter: blur(12px);
            border: none;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
            border-radius: 10px;
            padding: 0.75rem 1rem;
            color: var(--text-dark);
            font-size: 0.8rem;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s ease;
            z-index: 100;
            min-width: 180px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .zone-tooltip.visible {
            opacity: 1;
        }

        .zone-tooltip .tt-title {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 0.4rem;
            color: var(--lime-green);
        }

        .zone-tooltip .tt-row {
            display: flex;
            justify-content: space-between;
            gap: 1rem;
            padding: 0.15rem 0;
            color: var(--dark-gray);
        }

        .zone-tooltip .tt-row span:last-child {
            font-weight: 600;
            color: var(--text-dark);
        }

        /* ── Detail Modal ── */
        .modal-content {
            background: var(--white);
            border: none;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
            border-radius: 16px;
            color: var(--text-dark);
        }

        .modal-header {
            border-bottom: 1px solid var(--light-gray);
            padding: 1.25rem 1.5rem;
        }

        .modal-header .btn-close {
            filter: none;
        }

        .modal-body {
            padding: 1.5rem;
        }

        .detail-field {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.06);
        }

        .detail-field .field-label {
            color: var(--dark-gray);
            font-size: 0.85rem;
        }

        .detail-field .field-value {
            color: var(--text-dark);
            font-weight: 500;
            font-size: 0.85rem;
            text-align: right;
        }

        .status-pill {
            display: inline-block;
            padding: 0.2rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-installed {
            background: rgba(74, 158, 110, 0.2);
            color: var(--status-installed);
        }

        .status-on_site {
            background: rgba(58, 58, 58, 0.1);
            color: var(--primary-charcoal);
        }

        .status-in_transit {
            background: rgba(245, 166, 35, 0.2);
            color: var(--status-intransit);
        }

        .status-at_vendor {
            background: rgba(208, 2, 27, 0.2);
            color: var(--status-atvendor);
        }

        .status-staged_offsite {
            background: rgba(153, 153, 153, 0.2);
            color: var(--status-stagedoff);
        }

        /* ── Legend (inline with floor plan) ── */
        .inline-legend {
            display: flex;
            gap: 1.25rem;
            flex-wrap: wrap;
            padding: 0.75rem 0 0;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            color: var(--dark-gray);
            font-size: 0.72rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .legend-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        /* IA Draft 1 App Styling Overrides */
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        .card-title,
        .lead {
            color: var(--text-dark) !important;
        }

        :root {
            --primary-blue: #2563EB;
            --navbar-bg: #FFFFFF;
            --navbar-text: #64748B;
            --navbar-active: #2563EB;
            --border-light: #E2E8F0;
            --text-dark: #334155;
            /* Replace lime green with blue seamlessly */
            --lime-green: var(--primary-blue);
            --success-green: #10B981;
            /* actual green for success states */
        }

        .navbar {
            background-color: var(--navbar-bg) !important;
            border-bottom: 1px solid var(--border-light);
            box-shadow: none !important;
            padding: 0.5rem 0.5rem !important;
            /* tighter vertical padding */
        }

        .navbar-brand span {
            color: var(--text-dark) !important;
        }

        /* Stacked Mobile-App Style Nav Links */
        .navbar-nav {
            gap: 0.5rem;
            align-items: flex-end;
            /* right align mostly */
        }

        .navbar-nav .nav-link {
            color: var(--navbar-text) !important;
            font-size: 0.70rem !important;
            font-weight: 500;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 0.25rem 0.75rem !important;
            transition: all 0.2s ease;
        }

        .navbar-nav .nav-link i {
            font-size: 1.35rem;
            /* large icon */
            margin-bottom: 4px;
            margin-right: 0 !important;
            /* override me-1 */
            margin-left: 0 !important;
        }

        .navbar-nav .nav-link:hover,
        .navbar-nav .nav-link.active {
            color: var(--navbar-active) !important;
        }
    </style>
</head>

<body>
    <!-- Navigation Bar -->
    <!-- Standardized Navigation Bar -->
    <nav class="navbar navbar-expand-lg border-b border-[var(--border-light)]"
        style="padding: 0 !important; min-height: 64px; background: var(--navbar-bg);">
        <div class="container-fluid"
            style="padding-top: 0 !important; padding-bottom: 0 !important; padding-left: 1.5rem !important; padding-right: 1.5rem !important; margin-top: 0 !important; margin-bottom: 0 !important;">
            <a class="navbar-brand m-0" href="index.html"
                style="display: flex; align-items: center; gap: 12px; text-decoration: none; min-width: 240px; padding: 0.5rem 0;">
                <img src="favicon-96x96.png" alt="RPS Branding Logo"
                    style="height: 40px; width: auto; object-fit: contain;">
                <span
                    style="font-size: 1.25rem; font-weight: 600; color: var(--text-dark); letter-spacing: -0.02em;">MSR
                    Dashboard</span>
            </a>

            <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-toggle="collapse"
                data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto" style="gap: 4px;">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">
                            <div
                                style="display: flex; flex-direction: column; align-items: center; justify-content: center; min-min-width: 72px; white-space: nowrap; white-space: nowrap;">
                                <i class="fas fa-tachometer-alt" style="font-size: 1.1rem; margin-bottom: 4px;"></i>
                                <span
                                    style="font-size: 0.65rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em;">Dashboard</span>
                            </div>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="gap-analysis.html">
                            <div
                                style="display: flex; flex-direction: column; align-items: center; justify-content: center; min-min-width: 72px; white-space: nowrap; white-space: nowrap;">
                                <i class="fas fa-clipboard-check" style="font-size: 1.1rem; margin-bottom: 4px;"></i>
                                <span
                                    style="font-size: 0.65rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em;">Gap
                                    Analysis</span>
                            </div>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="material-tracking.html">
                            <div
                                style="display: flex; flex-direction: column; align-items: center; justify-content: center; min-min-width: 72px; white-space: nowrap; white-space: nowrap;">
                                <i class="fas fa-cubes" style="font-size: 1.1rem; margin-bottom: 4px;"></i>
                                <span
                                    style="font-size: 0.65rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em;">Materials</span>
                            </div>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="delivery-dates.html">
                            <div
                                style="display: flex; flex-direction: column; align-items: center; justify-content: center; min-min-width: 72px; white-space: nowrap; white-space: nowrap;">
                                <i class="fas fa-truck" style="font-size: 1.1rem; margin-bottom: 4px;"></i>
                                <span
                                    style="font-size: 0.65rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em;">Deliveries</span>
                            </div>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="project-schedule.html">
                            <div
                                style="display: flex; flex-direction: column; align-items: center; justify-content: center; min-min-width: 72px; white-space: nowrap; white-space: nowrap;">
                                <i class="fas fa-history" style="font-size: 1.1rem; margin-bottom: 4px;"></i>
                                <span
                                    style="font-size: 0.65rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em;">Schedule</span>
                            </div>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="samsara-tracking.html">
                            <div
                                style="display: flex; flex-direction: column; align-items: center; justify-content: center; min-min-width: 72px; white-space: nowrap; white-space: nowrap;">
                                <i class="fas fa-map-marker-alt" style="font-size: 1.1rem; margin-bottom: 4px;"></i>
                                <span
                                    style="font-size: 0.65rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em;">GPS</span>
                            </div>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="site-plan.html">
                            <div
                                style="display: flex; flex-direction: column; align-items: center; justify-content: center; min-min-width: 72px; white-space: nowrap; white-space: nowrap;">
                                <i class="fas fa-drafting-compass" style="font-size: 1.1rem; margin-bottom: 4px;"></i>
                                <span
                                    style="font-size: 0.65rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em;">Site
                                    Plan</span>
                            </div>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Page Header -->
    <!-- Standardized Page Header -->
    <div class="page-header bg-white"
        style="border-bottom: 1px solid var(--border-light); padding: 1.5rem 2rem; margin-bottom: 2rem;">
        <div class="container-fluid d-flex align-items-center" style="max-width: 1800px; margin: 0 auto; padding: 0;">
            <div class="header-icon-box me-3"
                style="width: 48px; height: 48px; min-width: 48px; border-radius: 12px; background: rgba(37,99,235,0.1); display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-building" style="font-size: 1.5rem; color: var(--primary-blue);"></i>
            </div>
            <div>
                <h1
                    style="font-size: 1.5rem; font-weight: 600; color: var(--text-dark); margin: 0 0 4px 0; line-height: 1.2;">
                    Facility Site Plan</h1>
                <p style="font-size: 0.9rem; color: var(--navbar-text); margin: 0;">Interactive map of installation
                    zones and material staging areas</p>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container-fluid mt-4">
        <!-- KPI Bar -->
        <div class="kpi-bar" id="kpiBar">
            <div
                class="kpi-card kpi-installed bg-white rounded-xl shadow-sm border-0 p-4 h-100 transition-all text-center">
                <div class="d-flex flex-column h-100 justify-content-center align-items-center">
                    <span class="text-uppercase fw-semibold"
                        style="font-size: 0.75rem; letter-spacing: 0.05em; color: var(--navbar-text); margin-bottom: 0.5rem;"><span
                            class="kpi-dot"
                            style="background:var(--status-installed); margin-right: 6px; display: inline-block; width: 10px; height: 10px; border-radius: 50%;"></span>Installed</span>
                    <span class="kpi-value" id="kpiInstalled"
                        style="font-size: 2.25rem; font-weight: 700; color: var(--text-dark); line-height: 1.1;">—</span>
                </div>
            </div>
            <div
                class="kpi-card kpi-onsite bg-white rounded-xl shadow-sm border-0 p-4 h-100 transition-all text-center">
                <div class="d-flex flex-column h-100 justify-content-center align-items-center">
                    <span class="text-uppercase fw-semibold"
                        style="font-size: 0.75rem; letter-spacing: 0.05em; color: var(--navbar-text); margin-bottom: 0.5rem;"><span
                            class="kpi-dot"
                            style="background:var(--lime-green); margin-right: 6px; display: inline-block; width: 10px; height: 10px; border-radius: 50%;"></span>On
                        Site</span>
                    <span class="kpi-value" id="kpiOnSite"
                        style="font-size: 2.25rem; font-weight: 700; color: var(--text-dark); line-height: 1.1;">—</span>
                </div>
            </div>
            <div class="kpi-card kpi-intransit">
                <div class="kpi-value" id="kpiInTransit">—</div>
                <div class="kpi-label"><span class="kpi-dot" style="background:var(--status-intransit);"></span>In
                    Transit</div>
            </div>
            <div class="kpi-card kpi-atvendor">
                <div class="kpi-value" id="kpiAtVendor">—</div>
                <div class="kpi-label"><span class="kpi-dot" style="background:var(--status-atvendor);"></span>At Vendor
                </div>
            </div>
            <div class="kpi-card kpi-total bg-white rounded-xl shadow-sm border-0 p-4 h-100 transition-all text-center">
                <div class="d-flex flex-column h-100 justify-content-center align-items-center">
                    <span class="text-uppercase fw-semibold"
                        style="font-size: 0.75rem; letter-spacing: 0.05em; color: var(--navbar-text); margin-bottom: 0.5rem;">Total
                        Assets</span>
                    <span class="kpi-value" id="kpiTotal"
                        style="font-size: 2.25rem; font-weight: 700; color: var(--text-dark); line-height: 1.1;">—</span>
                </div>
            </div>
        </div>

        <!-- Filter Bar -->
        <div class="filter-bar">
            <div style="position:relative; flex:1; max-width:280px;">
                <i class="fas fa-search"
                    style="position:absolute;left:12px;top:50%;transform:translateY(-50%);color:rgba(255,255,255,0.3);font-size:0.8rem;"></i>
                <input type="text" class="form-control" id="searchInput" placeholder="Search assets..."
                    style="padding-left:2.2rem;">
            </div>
            <select class="form-select" id="filterCategory" style="max-width:180px;">
                <option value="">All Categories</option>
                <option value="Mechanical">Mechanical</option>
                <option value="Electrical">Electrical</option>
                <option value="Instrumentation">Instrumentation</option>
                <option value="Civil">Civil</option>
                <option value="Steel">Steel</option>
                <option value="Piping">Piping</option>
            </select>
            <select class="form-select" id="filterStatus" style="max-width:180px;">
                <option value="">All Statuses</option>
                <option value="installed">Installed</option>
                <option value="on_site">On Site</option>
                <option value="in_transit">In Transit</option>
                <option value="at_vendor">At Vendor</option>
                <option value="staged_offsite">Staged Off-site</option>
            </select>
            <button class="filter-btn" id="btnReset" title="Reset filters">
                <i class="fas fa-undo me-1"></i> Reset
            </button>
        </div>

        <!-- Synoptic Layout -->
        <div class="synoptic-container">
            <!-- Floor Plan -->
            <div class="floor-plan-panel">
                <div class="floor-plan-header">
                    <h3><i class="fas fa-drafting-compass me-2"></i>Site Plan</h3>
                    <div class="controls">
                        <button class="filter-btn" id="btnZoomFit" title="Fit to view">
                            <i class="fas fa-expand"></i>
                        </button>
                    </div>
                </div>
                <div class="floor-plan-body">
                    <svg id="floorPlanSvg" class="factory-svg" viewBox="0 0 1100 720"
                        xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <!-- Road pattern -->
                            <pattern id="roadDash" patternUnits="userSpaceOnUse" width="20" height="4"
                                patternTransform="rotate(0)">
                                <rect width="10" height="2" fill="rgba(58,58,58,0.12)" y="1" />
                            </pattern>
                            <!-- Grass pattern -->
                            <pattern id="grassDots" patternUnits="userSpaceOnUse" width="12" height="12">
                                <circle cx="3" cy="3" r="0.5" fill="rgba(74,158,110,0.2)" />
                                <circle cx="9" cy="9" r="0.5" fill="rgba(74,158,110,0.15)" />
                            </pattern>
                            <!-- Parking stripes -->
                            <pattern id="parkingLines" patternUnits="userSpaceOnUse" width="22" height="40">
                                <line x1="0" y1="0" x2="0" y2="40" stroke="rgba(58,58,58,0.15)" stroke-width="1" />
                            </pattern>
                            <!-- Gravel pattern for laydown -->
                            <pattern id="gravelPattern" patternUnits="userSpaceOnUse" width="8" height="8">
                                <circle cx="2" cy="2" r="0.6" fill="rgba(37,99,235,0.12)" />
                                <circle cx="6" cy="6" r="0.4" fill="rgba(37,99,235,0.1)" />
                            </pattern>
                        </defs>

                        <!-- ═══ BACKGROUND GRASS ═══ -->
                        <rect x="0" y="0" width="1100" height="720" fill="#eef2ea" rx="8" />
                        <rect x="0" y="0" width="1100" height="720" fill="url(#grassDots)" rx="8" />

                        <!-- ═══ PERIMETER FENCE ═══ -->
                        <rect x="30" y="30" width="1040" height="660" rx="4" fill="none" stroke="rgba(58,58,58,0.4)"
                            stroke-width="2" stroke-dasharray="8 3" />
                        <!-- Fence posts -->
                        <g opacity="0.3">
                            <circle cx="30" cy="30" r="3" fill="var(--primary-charcoal)" />
                            <circle cx="290" cy="30" r="3" fill="var(--primary-charcoal)" />
                            <circle cx="550" cy="30" r="3" fill="var(--primary-charcoal)" />
                            <circle cx="810" cy="30" r="3" fill="var(--primary-charcoal)" />
                            <circle cx="1070" cy="30" r="3" fill="var(--primary-charcoal)" />
                            <circle cx="30" cy="360" r="3" fill="var(--primary-charcoal)" />
                            <circle cx="30" cy="690" r="3" fill="var(--primary-charcoal)" />
                            <circle cx="1070" cy="360" r="3" fill="var(--primary-charcoal)" />
                            <circle cx="1070" cy="690" r="3" fill="var(--primary-charcoal)" />
                            <circle cx="290" cy="690" r="3" fill="var(--primary-charcoal)" />
                            <circle cx="550" cy="690" r="3" fill="var(--primary-charcoal)" />
                            <circle cx="810" cy="690" r="3" fill="var(--primary-charcoal)" />
                        </g>

                        <!-- ═══ MAIN GATE (bottom-center) ═══ -->
                        <g>
                            <!-- Gate opening in fence -->
                            <rect x="495" y="684" width="110" height="12" fill="#eef2ea" />
                            <!-- Gate posts -->
                            <rect x="493" y="680" width="6" height="20" fill="rgba(58,58,58,0.5)" rx="1" />
                            <rect x="601" y="680" width="6" height="20" fill="rgba(58,58,58,0.5)" rx="1" />
                            <!-- Gate arrows -->
                            <polygon points="540,702 550,712 560,702" fill="rgba(58,58,58,0.3)" />
                            <!-- Gate label -->
                            <text x="550" y="695" text-anchor="middle" fill="rgba(58,58,58,0.7)" font-size="7"
                                letter-spacing="2" font-weight="600">MAIN GATE</text>
                        </g>

                        <!-- ═══ GUARD SHACK ═══ -->
                        <g>
                            <rect x="614" y="660" width="45" height="28" fill="rgba(200,200,200,0.6)"
                                stroke="rgba(37,99,235,0.3)" stroke-width="1" rx="3" />
                            <text x="636" y="677" text-anchor="middle" fill="rgba(58,58,58,0.7)" font-size="6"
                                font-weight="500">GUARD</text>
                        </g>

                        <!-- ═══ ACCESS ROAD (main entry road going up from gate) ═══ -->
                        <g class="site-roads">
                            <!-- Main road from gate heading north -->
                            <rect x="525" y="440" width="50" height="250" fill="rgba(180,180,180,0.5)" rx="2" />
                            <rect x="549" y="440" width="2" height="250" fill="url(#roadDash)" />
                            <!-- Road east turn  -->
                            <rect x="525" y="440" width="530" height="45" fill="rgba(180,180,180,0.5)" rx="2" />
                            <rect x="525" y="461" width="530" height="2" fill="url(#roadDash)" />
                            <!-- Road west spur -->
                            <rect x="50" y="440" width="475" height="45" fill="rgba(180,180,180,0.5)" rx="2" />
                            <rect x="50" y="461" width="475" height="2" fill="url(#roadDash)" />
                        </g>

                        <!-- ═══ PARKING LOT (bottom-left, below laydown) ═══ -->
                        <g>
                            <rect x="60" y="625" width="200" height="55" fill="rgba(200,200,205,0.5)"
                                stroke="rgba(58,58,58,0.15)" stroke-width="1" rx="4" />
                            <rect x="60" y="625" width="200" height="55" fill="url(#parkingLines)" rx="4" />
                            <!-- Parking cars (small rectangles) -->
                            <rect x="72" y="635" width="16" height="10" fill="rgba(100,140,200,0.25)" rx="2" />
                            <rect x="94" y="635" width="16" height="10" fill="rgba(200,80,80,0.25)" rx="2" />
                            <rect x="116" y="635" width="16" height="10" fill="rgba(58,58,58,0.15)" rx="2" />
                            <rect x="138" y="635" width="16" height="10" fill="rgba(74,158,110,0.25)" rx="2" />
                            <rect x="160" y="635" width="16" height="10" fill="rgba(200,180,80,0.25)" rx="2" />
                            <rect x="182" y="635" width="16" height="10" fill="rgba(150,100,200,0.20)" rx="2" />
                            <rect x="204" y="635" width="16" height="10" fill="rgba(58,58,58,0.1)" rx="2" />
                            <rect x="72" y="660" width="16" height="10" fill="rgba(200,100,80,0.2)" rx="2" />
                            <rect x="94" y="660" width="16" height="10" fill="rgba(100,100,200,0.2)" rx="2" />
                            <rect x="116" y="660" width="16" height="10" fill="rgba(58,58,58,0.12)" rx="2" />
                            <rect x="138" y="660" width="16" height="10" fill="rgba(80,180,80,0.2)" rx="2" />
                            <rect x="160" y="660" width="16" height="10" fill="rgba(200,200,100,0.2)" rx="2" />
                            <text x="160" y="655" text-anchor="middle" fill="rgba(58,58,58,0.5)" font-size="7"
                                letter-spacing="1">EMPLOYEE PARKING</text>
                        </g>

                        <!-- ═══ VISITOR PARKING (bottom-right) ═══ -->
                        <g>
                            <rect x="840" y="625" width="120" height="55" fill="rgba(200,200,205,0.4)"
                                stroke="rgba(58,58,58,0.15)" stroke-width="1" rx="4" />
                            <rect x="840" y="625" width="120" height="55" fill="url(#parkingLines)" rx="4" />
                            <rect x="852" y="638" width="14" height="9" fill="rgba(58,58,58,0.12)" rx="2" />
                            <rect x="872" y="638" width="14" height="9" fill="rgba(100,140,200,0.2)" rx="2" />
                            <rect x="892" y="638" width="14" height="9" fill="rgba(200,80,80,0.2)" rx="2" />
                            <text x="900" y="665" text-anchor="middle" fill="rgba(58,58,58,0.5)" font-size="7"
                                letter-spacing="1">VISITOR</text>
                        </g>

                        <!-- ═══ LANDSCAPING / TREES ═══ -->
                        <g opacity="0.4">
                            <!-- Trees along fence perimeter -->
                            <circle cx="55" cy="55" r="8" fill="rgba(40,100,40,0.6)" />
                            <circle cx="85" cy="48" r="6" fill="rgba(50,110,50,0.5)" />
                            <circle cx="120" cy="55" r="7" fill="rgba(40,100,40,0.6)" />
                            <circle cx="160" cy="50" r="5" fill="rgba(55,120,55,0.5)" />
                            <circle cx="1040" cy="55" r="8" fill="rgba(40,100,40,0.6)" />
                            <circle cx="1005" cy="50" r="6" fill="rgba(50,110,50,0.5)" />
                            <circle cx="970" cy="55" r="7" fill="rgba(40,100,40,0.6)" />
                            <!-- Trees along left fence -->
                            <circle cx="48" cy="120" r="6" fill="rgba(45,105,45,0.5)" />
                            <circle cx="48" cy="200" r="7" fill="rgba(40,100,40,0.5)" />
                            <circle cx="48" cy="280" r="6" fill="rgba(50,110,50,0.5)" />
                            <!-- Trees near parking -->
                            <circle cx="280" y="580" r="8" fill="rgba(40,100,40,0.6)" />
                            <circle cx="280" cy="620" r="6" fill="rgba(50,110,50,0.5)" />
                            <circle cx="280" cy="660" r="7" fill="rgba(40,100,40,0.55)" />
                        </g>

                        <!-- ═══ RETENTION POND ═══ -->
                        <g>
                            <ellipse cx="970" cy="160" rx="55" ry="30" fill="rgba(40,80,120,0.2)"
                                stroke="rgba(80,140,200,0.2)" stroke-width="1" />
                            <ellipse cx="970" cy="160" rx="40" ry="20" fill="rgba(40,90,140,0.15)" />
                            <text x="970" y="163" text-anchor="middle" fill="rgba(100,180,255,0.3)" font-size="7"
                                letter-spacing="0.5">RETENTION POND</text>
                        </g>

                        <!-- ═══ NORTH ARROW ═══ -->
                        <g transform="translate(1050, 55)">
                            <circle cx="0" cy="0" r="18" fill="rgba(37,99,235,0.1)" stroke="rgba(58,58,58,0.3)"
                                stroke-width="1" />
                            <polygon points="0,-14 -4,-4 0,-7 4,-4" fill="rgba(58,58,58,0.5)" />
                            <text x="0" y="12" text-anchor="middle" fill="rgba(58,58,58,0.4)" font-size="7"
                                font-weight="600">N</text>
                        </g>

                        <!-- ═══ SITE LABEL ═══ -->
                        <text x="550" y="22" text-anchor="middle" fill="rgba(58,58,58,0.2)" font-size="10"
                            letter-spacing="4" font-weight="600">INDUSTRIAL FACILITY SITE PLAN</text>

                        <!-- ═══════════════════════════════════════════ -->
                        <!-- ═══ BUILDINGS / ZONES ═══════════════════ -->
                        <!-- ═══════════════════════════════════════════ -->

                        <!-- Zone: Assembly Hall (large main building, top-left) -->
                        <g class="zone-group" data-zone="assembly_hall">
                            <rect class="zone-rect" x="70" y="70" width="360" height="170"
                                fill="rgba(74,158,110,0.06)" />
                            <!-- Building roof detail lines -->
                            <line x1="70" y1="120" x2="430" y2="120" stroke="rgba(58,58,58,0.08)" stroke-width="1" />
                            <line x1="250" y1="70" x2="250" y2="240" stroke="rgba(58,58,58,0.06)" stroke-width="1" />
                            <!-- Entry door -->
                            <rect x="240" y="232" width="20" height="8" fill="rgba(37,99,235,0.2)" rx="1" />
                            <text class="zone-label" x="250" y="145" text-anchor="middle">Assembly Hall</text>
                            <text class="zone-sublabel" x="250" y="162" text-anchor="middle">Main Build Area</text>
                            <g class="zone-assets" data-zone="assembly_hall"></g>
                        </g>

                        <!-- Zone: Mechanical Bay (top-center-right, connected to Assembly) -->
                        <g class="zone-group" data-zone="mechanical_bay">
                            <rect class="zone-rect" x="460" y="70" width="300" height="170"
                                fill="rgba(37,99,235,0.1)" />
                            <!-- Overhead crane track lines -->
                            <line x1="480" y1="110" x2="740" y2="110" stroke="rgba(58,58,58,0.08)" stroke-width="1"
                                stroke-dasharray="3 2" />
                            <line x1="480" y1="190" x2="740" y2="190" stroke="rgba(58,58,58,0.08)" stroke-width="1"
                                stroke-dasharray="3 2" />
                            <!-- Roll-up door -->
                            <rect x="740" y="130" width="20" height="40" fill="rgba(37,99,235,0.15)" rx="2" />
                            <text class="zone-label" x="610" y="145" text-anchor="middle">Mechanical Bay</text>
                            <text class="zone-sublabel" x="610" y="162" text-anchor="middle">Rotating Equipment</text>
                            <g class="zone-assets" data-zone="mechanical_bay"></g>
                        </g>

                        <!-- Zone: Pipe Shop (middle-left, L-shaped feel) -->
                        <g class="zone-group" data-zone="pipe_shop">
                            <rect class="zone-rect" x="70" y="260" width="210" height="155"
                                fill="rgba(74,144,226,0.06)" />
                            <!-- Welding booth markers -->
                            <rect x="85" y="375" width="20" height="8" fill="rgba(74,144,226,0.1)" rx="1" />
                            <rect x="115" y="375" width="20" height="8" fill="rgba(74,144,226,0.1)" rx="1" />
                            <text class="zone-label" x="175" y="325" text-anchor="middle">Pipe Shop</text>
                            <text class="zone-sublabel" x="175" y="342" text-anchor="middle">Fabrication</text>
                            <g class="zone-assets" data-zone="pipe_shop"></g>
                        </g>

                        <!-- Zone: Instrument Shop (middle-center) -->
                        <g class="zone-group" data-zone="instrument_shop">
                            <rect class="zone-rect" x="300" y="260" width="200" height="155"
                                fill="rgba(245,166,35,0.06)" />
                            <text class="zone-label" x="400" y="325" text-anchor="middle">Instrument Shop</text>
                            <text class="zone-sublabel" x="400" y="342" text-anchor="middle">Calibration &
                                Testing</text>
                            <g class="zone-assets" data-zone="instrument_shop"></g>
                        </g>

                        <!-- Zone: Electrical Room (middle-right, smaller footprint) -->
                        <g class="zone-group" data-zone="electrical_room">
                            <rect class="zone-rect" x="520" y="260" width="190" height="155"
                                fill="rgba(208,2,27,0.06)" />
                            <!-- Electrical hazard markers -->
                            <polygon points="614,390 608,400 620,400" fill="rgba(245,200,35,0.15)"
                                stroke="rgba(245,200,35,0.2)" stroke-width="0.5" />
                            <text class="zone-label" x="615" y="325" text-anchor="middle">Electrical Room</text>
                            <text class="zone-sublabel" x="615" y="342" text-anchor="middle">Switchgear & Panels</text>
                            <g class="zone-assets" data-zone="electrical_room"></g>
                        </g>

                        <!-- Zone: Warehouse (far right) -->
                        <g class="zone-group" data-zone="warehouse">
                            <rect class="zone-rect" x="730" y="260" width="200" height="155"
                                fill="rgba(153,153,153,0.06)" />
                            <!-- Shelving rows -->
                            <line x1="750" y1="310" x2="910" y2="310" stroke="rgba(58,58,58,0.08)" stroke-width="1" />
                            <line x1="750" y1="340" x2="910" y2="340" stroke="rgba(58,58,58,0.08)" stroke-width="1" />
                            <line x1="750" y1="370" x2="910" y2="370" stroke="rgba(58,58,58,0.08)" stroke-width="1" />
                            <text class="zone-label" x="830" y="295" text-anchor="middle">Warehouse</text>
                            <text class="zone-sublabel" x="830" y="312" text-anchor="middle">Indoor Storage</text>
                            <g class="zone-assets" data-zone="warehouse"></g>
                        </g>

                        <!-- Zone: Laydown Yard (large open area, lower-left) -->
                        <g class="zone-group" data-zone="laydown_yard">
                            <rect class="zone-rect" x="70" y="500" width="420" height="110" fill="rgba(37,99,235,0.04)"
                                stroke-dasharray="6 3" />
                            <rect x="70" y="500" width="420" height="110" fill="url(#gravelPattern)" rx="6" />
                            <!-- Stacked pipe/steel markings -->
                            <line x1="100" y1="570" x2="200" y2="570" stroke="rgba(37,99,235,0.1)" stroke-width="3" />
                            <line x1="100" y1="578" x2="200" y2="578" stroke="rgba(37,99,235,0.08)" stroke-width="3" />
                            <line x1="100" y1="586" x2="200" y2="586" stroke="rgba(37,99,235,0.06)" stroke-width="3" />
                            <text class="zone-label" x="280" y="545" text-anchor="middle">Laydown Yard</text>
                            <text class="zone-sublabel" x="280" y="560" text-anchor="middle">Outdoor Staging Area</text>
                            <g class="zone-assets" data-zone="laydown_yard"></g>
                        </g>

                        <!-- Zone: Loading Dock (lower-right, with dock bays) -->
                        <g class="zone-group" data-zone="loading_dock">
                            <rect class="zone-rect" x="610" y="500" width="280" height="110"
                                fill="rgba(245,166,35,0.06)" />
                            <!-- Dock bay doors -->
                            <rect x="870" y="508" width="20" height="25" fill="rgba(37,99,235,0.15)" rx="2"
                                stroke="rgba(58,58,58,0.2)" stroke-width="0.5" />
                            <rect x="870" y="540" width="20" height="25" fill="rgba(37,99,235,0.15)" rx="2"
                                stroke="rgba(58,58,58,0.2)" stroke-width="0.5" />
                            <rect x="870" y="572" width="20" height="25" fill="rgba(37,99,235,0.15)" rx="2"
                                stroke="rgba(58,58,58,0.2)" stroke-width="0.5" />
                            <!-- Dock labels -->
                            <text x="880" y="525" text-anchor="middle" fill="rgba(58,58,58,0.5)" font-size="6">D1</text>
                            <text x="880" y="557" text-anchor="middle" fill="rgba(58,58,58,0.5)" font-size="6">D2</text>
                            <text x="880" y="589" text-anchor="middle" fill="rgba(58,58,58,0.5)" font-size="6">D3</text>
                            <!-- Truck at dock -->
                            <rect x="895" y="535" width="45" height="18" fill="rgba(120,120,130,0.4)" rx="3"
                                stroke="rgba(58,58,58,0.15)" stroke-width="0.5" />
                            <rect x="940" y="538" width="12" height="12" fill="rgba(100,100,110,0.5)" rx="2" />
                            <text class="zone-label" x="740" y="550" text-anchor="middle">Loading Dock</text>
                            <text class="zone-sublabel" x="740" y="565" text-anchor="middle">Receiving Area</text>
                            <g class="zone-assets" data-zone="loading_dock"></g>
                        </g>

                        <!-- ═══ FIRE HYDRANTS ═══ -->
                        <g opacity="0.4">
                            <circle cx="440" cy="455" r="4" fill="none" stroke="rgba(220,60,60,0.5)"
                                stroke-width="1.5" />
                            <text x="440" y="450" text-anchor="middle" fill="rgba(220,60,60,0.5)" font-size="5"
                                font-weight="700">FH</text>
                            <circle cx="800" cy="455" r="4" fill="none" stroke="rgba(220,60,60,0.5)"
                                stroke-width="1.5" />
                            <text x="800" y="450" text-anchor="middle" fill="rgba(220,60,60,0.5)" font-size="5"
                                font-weight="700">FH</text>
                        </g>

                        <!-- ═══ SCALE BAR ═══ -->
                        <g transform="translate(70, 705)">
                            <line x1="0" y1="0" x2="80" y2="0" stroke="rgba(255,255,255,0.25)" stroke-width="1.5" />
                            <line x1="0" y1="-3" x2="0" y2="3" stroke="rgba(255,255,255,0.25)" stroke-width="1" />
                            <line x1="80" y1="-3" x2="80" y2="3" stroke="rgba(255,255,255,0.25)" stroke-width="1" />
                            <text x="40" y="-5" text-anchor="middle" fill="rgba(58,58,58,0.5)" font-size="6">100
                                ft</text>
                        </g>
                    </svg>

                    <!-- Inline legend -->
                    <div class="inline-legend">
                        <div class="legend-item">
                            <div class="legend-dot" style="background:var(--status-installed);"></div> Installed
                        </div>
                        <div class="legend-item">
                            <div class="legend-dot" style="background:var(--lime-green);"></div> On Site
                        </div>
                        <div class="legend-item">
                            <div class="legend-dot" style="background:var(--status-intransit);"></div> In Transit
                        </div>
                        <div class="legend-item">
                            <div class="legend-dot" style="background:var(--status-atvendor);"></div> At Vendor
                        </div>
                        <div class="legend-item">
                            <div class="legend-dot" style="background:var(--status-stagedoff);"></div> Staged Off-site
                        </div>
                    </div>

                    <!-- Zone tooltip -->
                    <div class="zone-tooltip" id="zoneTooltip"></div>
                </div>
            </div>

            <!-- Off-Site Key Panel -->
            <div class="offsite-panel">
                <div class="offsite-header">
                    <h3><i class="far fa-map-signs me-2"></i>Off-Site Assets</h3>
                </div>
                <div class="offsite-body" id="offsiteList">
                    <!-- Populated by JS -->
                </div>
            </div>
        </div>
    </div>

    <!-- Asset Detail Modal -->
    <div class="modal fade" id="assetModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="assetModalTitle">Asset Detail</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="assetModalBody">
                    <!-- Populated by JS -->
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Synoptic Model JS -->
    <script src="site-plan.js?v=2"></script>
</body>

</html>